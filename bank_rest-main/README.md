# üöÄ –°–∏—Å—Ç–µ–º–∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –ö–∞—Ä—Ç–∞–º–∏

**Bank Cards Management System** ‚Äî backend-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ **Java (Spring Boot)** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ –º–µ–∂–¥—É –∫–∞—Ä—Ç–∞–º–∏.

---

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (`ROLE_ADMIN`)
- –°–æ–∑–¥–∞—ë—Ç –∏ —É–¥–∞–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
- –°–æ–∑–¥–∞—ë—Ç, –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç, –±–ª–æ–∫–∏—Ä—É–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç –∫–∞—Ä—Ç—ã  
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤—Å–µ –∫–∞—Ä—Ç—ã (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π)

### üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (`ROLE_USER`)
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∫–∞—Ä—Ç—ã  
- –î–µ–ª–∞–µ—Ç –ø–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É —Å–≤–æ–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏  
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∫–∞—Ä—Ç—ã  
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å –ø–æ –∫–∞—Ä—Ç–µ  

---

## üí≥ –ê—Ç—Ä–∏–±—É—Ç—ã –∫–∞—Ä—Ç—ã

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----------|
| `cardNumber` | –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã (–≤ –ë–î —Ö—Ä–∞–Ω–∏—Ç—Å—è **–≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ**, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ `**** **** **** 1234`) |
| `userId` | –í–ª–∞–¥–µ–ª–µ—Ü –∫–∞—Ä—Ç—ã |
| `expiryDate` | –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è |
| `status` | `ACTIVE`, `BLOCKED`, `EXPIRED` |
| `balance` | –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å |

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

<pre>
src/main/java/com/example/bankcards/
‚îú‚îÄ‚îÄ config/         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (Security, JWT, Crypto, OpenAPI)
‚îú‚îÄ‚îÄ controller/     # REST-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îú‚îÄ‚îÄ dto/            # DTO-–∫–ª–∞—Å—Å—ã (–∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã)
‚îú‚îÄ‚îÄ entity/         # –°—É—â–Ω–æ—Å—Ç–∏ JPA
‚îú‚îÄ‚îÄ exception/      # –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ mapper/         # MapStruct-–º–∞–ø–ø–µ—Ä—ã
‚îú‚îÄ‚îÄ repository/     # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ Spring Data JPA
‚îú‚îÄ‚îÄ security/       # JWT-—Ñ–∏–ª—å—Ç—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ service/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ util/           # –£—Ç–∏–ª–∏—Ç—ã –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã
‚îî‚îÄ‚îÄ BankCardsApplication.java
</pre>
---

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ |
|------------|-------------|
| –Ø–∑—ã–∫ | Java 21 |
| –§—Ä–µ–π–º–≤–æ—Ä–∫ | Spring Boot 3.5.x |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | Spring Security 6, JWT |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | PostgreSQL |
| –ú–∏–≥—Ä–∞—Ü–∏–∏ | Liquibase |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è | Docker, Docker Compose |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | Swagger UI / OpenAPI |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | JUnit 5, Mockito |
| –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ | AES (CryptoService) |

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ **JWT-—Ç–æ–∫–µ–Ω—ã**  
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç (**AES**)  
- –†–æ–ª–µ–≤–æ–π –¥–æ—Å—Ç—É–ø (`USER`, `ADMIN`)  
- –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç –≤ –æ—Ç–≤–µ—Ç–∞—Ö  
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ —á–µ—Ä–µ–∑ `@PreAuthorize`  

---

## üßæ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:  
üëâ [http://localhost:8081/swagger-ui/index.html](http://localhost:8081/swagger-ui/index.html)

OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:
docs/openapi.yaml


| –ú–µ—Ç–æ–¥ | URL | –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|------|-----------|
| `POST` | `/api/token` | ‚Äî | –ü–æ–ª—É—á–µ–Ω–∏–µ JWT-—Ç–æ–∫–µ–Ω–∞ |
| `GET` | `/api/cards/all` | USER | –°–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `POST` | `/api/cards/admin` | ADMIN | –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã |
| `PATCH` | `/api/cards/admin/block/{id}` | ADMIN | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–∞—Ä—Ç—ã |
| `DELETE` | `/api/cards/admin/{id}` | ADMIN | –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã |
| `PUT` | `/api/cards/transfer` | USER | –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å–≤–æ–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏ |

---

## üóÉÔ∏è –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **PostgreSQL**  
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ **Liquibase**  
- –§–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤:
src/main/resources/db/migration/


---

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

### 1Ô∏è‚É£ –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
```bash
mvn clean package -DskipTests
```

### 2Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```
docker compose up --build
```

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
http://localhost:8081
```

### 4Ô∏è‚É£ Swagger UI
```
http://localhost:8081/swagger-ui/index.html
```

### ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Quickstart)

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:

| –†–æ–ª—å  | –õ–æ–≥–∏–Ω   | –ü–∞—Ä–æ–ª—å   |
| ----- | ------- | -------- |
| ADMIN | `admin` | `123456` |
| USER  | `user`  | `123456` |


### 1Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω:

```
POST /api/token
Content-Type: application/json

{
  "username": "admin",
  "password": "123456"
}
```


2Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω:

```
Authorization: Bearer <jwt_token>
```


### üß† –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã** –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ (CardService, UserService)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Mockito** –∏ **JUnit 5**